<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>The let keyword in ES6 JavaScript | Klughertz Jonathan</title>
  <meta name="author" content="Klughertz Jonathan">
  
  <meta name="description" content="The let keyword in JavaScript is like the old var keyword in JavaScript except that it respects block scope. Before ES6, JavaScript only had function scope. Although there is nothing fundamentally wrong with function scope, it confuses a lot of people coming from C based languages which have block scope.">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <meta property="og:title" content="The let keyword in ES6 JavaScript"/>
  <meta property="og:site_name" content="Klughertz Jonathan"/>

  
    <meta property="og:image" content="undefined"/>
  

  <link href="/favicon.png" rel="icon">
  <link rel="alternate" href="/atom.xml" title="Klughertz Jonathan" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  
<script>
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
			m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

	ga('create', 'UA-71082014-1', 'auto');
	ga('send', 'pageview');

</script>



  

  

</head>


<body>
  <header id="header" class="inner"><div class="alignleft">
  <h1><a href="/">Klughertz Jonathan</a></h1>
  <h2><a href="/"></a></h2>
</div>
<nav id="main-nav" class="alignright">
  <ul>
    
      <li><a href="/">Home</a></li>
    
      <li><a href="/archives">Archives</a></li>
    
    <li><a target="_blank" href="https://github.com/klugjo"><i class="github-icon"></i></a></li>
    <li><a target="_blank" href="https://sg.linkedin.com/in/jonathanklughertz"><i class="linkedin-icon"></i></a></li>
  </ul>
  <div class="clearfix"></div>
</nav>
<div class="clearfix"></div></header>
  <div id="content" class="inner">
    <div id="main-col" ><div id="wrapper"><article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2016-01-12T03:32:24.000Z"><a href="/2016/01/The-let-keyword-in-ES6-JavaScript/">2016-01-12</a></time>
      
      
  
    <h1 class="title">The let keyword in ES6 JavaScript</h1>
  

    </header>
    <div class="entry">
      
        <p>The <code>let</code> keyword in JavaScript is like the old <code>var</code> keyword in JavaScript except that it respects block scope. Before ES6, JavaScript only had function scope. Although there is nothing fundamentally wrong with function scope, it confuses a lot of people coming from C based languages which have block scope.</p>
<a id="more"></a> 
<p><br></p>
<h2 id="1)_Block_scope_vs_Function_scope">1) Block scope vs Function scope</h2><p>Scope refers to some portion of the code where a variable exists. Outside of that scope the variable will be not be accessible or will be another variable with the same name.<br><br></p>
<h3 id="a)_Function_scope">a) Function scope</h3><p>Function scope means that any variable defined anywhere inside a function, will be accessible anywhere in that function and will not exist outside of it.<br><br></p>
<h3 id="b)_Block_scope">b) Block scope</h3><p>Block scope means that any variable defined anywhere inside any block (for example <code>if</code> and <code>for</code> blocks), will be accessible anywhere inside that block and will not exist outside of it.</p>
<p><br></p>
<h2 id="2)_JavaScript_var_and_let">2) JavaScript <code>var</code> and <code>let</code></h2><p>In JavaScript, the <code>var</code> keyword is function scoped. The <code>let</code> keyword is block scoped.<br><br></p>
<h3 id="a)_Example">a) Example</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">main</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> a = <span class="string">'function-a'</span>;</span><br><span class="line">    <span class="keyword">var</span> b = <span class="string">'function-b'</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">console</span>.log(a); <span class="comment">// 'function-a'</span></span><br><span class="line">    <span class="built_in">console</span>.log(b); <span class="comment">// 'function-b'</span></span><br><span class="line">    <span class="built_in">console</span>.log(c); <span class="comment">// ReferenceError Exception: c is not defined</span></span><br><span class="line">    <span class="built_in">console</span>.log(d === <span class="literal">undefined</span>); <span class="comment">// true</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span>(a !== b) &#123;</span><br><span class="line">    </span><br><span class="line">        <span class="keyword">let</span> a = <span class="string">'block-a'</span>; <span class="comment">// Sets the value of a but only in the if block</span></span><br><span class="line">        <span class="keyword">var</span> b = <span class="string">'block-b'</span>; <span class="comment">// Sets the value of b in the entire main() function</span></span><br><span class="line">        <span class="keyword">let</span> c = <span class="string">'block-c'</span>; <span class="comment">// Defined only in the if block</span></span><br><span class="line">        <span class="keyword">var</span> d = <span class="string">'block-d'</span>; <span class="comment">// Defined in the entire main() function</span></span><br><span class="line">        </span><br><span class="line">        <span class="built_in">console</span>.log(a); <span class="comment">// 'block-a'</span></span><br><span class="line">        <span class="built_in">console</span>.log(b); <span class="comment">// 'block-b'</span></span><br><span class="line">        <span class="built_in">console</span>.log(c); <span class="comment">// 'block-c'</span></span><br><span class="line">        <span class="built_in">console</span>.log(d); <span class="comment">// 'block-d'</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">console</span>.log(a); <span class="comment">// 'function-a'</span></span><br><span class="line">    <span class="built_in">console</span>.log(b); <span class="comment">// 'block-b'</span></span><br><span class="line">    <span class="built_in">console</span>.log(c); <span class="comment">// ReferenceError Exception: c is not defined</span></span><br><span class="line">    <span class="built_in">console</span>.log(d); <span class="comment">// 'block-d'</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><br></p>
<h3 id="b)_Notes">b) Notes</h3><ul>
<li>Variables defined with <code>var</code> inside an <code>if</code> block will exist inside the entire function they are defined in â€“ ignoring the <code>if</code> block. </li>
<li>Variables defined with <code>var</code> will exist and have a value of undefined in the section of the code before the initialisation. Check out variable <code>d</code> in the example. The variable is created at the beginning of the function, this is called <a href="https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Statements/var" target="_blank" rel="external">variable hoisting</a>.</li>
<li>Variables defined with <code>let</code> will only exist within the block they are defined in. Trying to access the variable outside of the block will throw an Error. This is the case for <code>c</code> in the example.</li>
<li>Use <code>let</code> to override the value of a function scoped variable inside a block only. Example: <code>a</code>.</li>
</ul>
<p><br></p>
<h2 id="3)_When_to_use_let">3) When to use <code>let</code></h2><p><br></p>
<h3 id="a)_In_for_loops">a) In <code>for</code> loops</h3><p>Do</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> i; i &lt; n; i = i + <span class="number">1</span>) &#123;</span><br><span class="line">    [...]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>instead of</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> i; <span class="comment">// Will be function scoped and can cause interferences</span></span><br><span class="line"><span class="keyword">for</span>(i = <span class="number">0</span>; i &lt; n; i = i + <span class="number">1</span>) &#123;</span><br><span class="line">    [...]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><br></p>
<h3 id="b)_In_closures_that_need_to_retain_creation_time_values">b) In closures that need to retain creation time values</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">1</span>; i &lt; <span class="number">4</span>; i = i + <span class="number">1</span>) &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">let</span> j = i;</span><br><span class="line">    setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(i); <span class="comment">// Will always print out 4</span></span><br><span class="line">        <span class="built_in">console</span>.log(j); <span class="comment">// Will print out 1, 2 and 3 as expected</span></span><br><span class="line">    &#125;, <span class="number">500</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Useful to create multiple instances of a variable inside a block.<br><br></p>
<h3 id="c)_For_temporary_variables_inside_blocks">c) For temporary variables inside blocks</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> i = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">while</span>(i &lt; <span class="number">75</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> random = <span class="built_in">Math</span>.random();</span><br><span class="line">  i = random * <span class="number">100</span>;</span><br><span class="line">  <span class="built_in">console</span>.log(i);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><br></p>
<h2 id="4)_let_caveats_and_warnings">4) <code>let</code> caveats and warnings</h2><p><br></p>
<h3 id="a)_No_access_to_the_variable_before_declaration">a) No access to the variable before declaration</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">main</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">console</span>.log(foo); <span class="comment">// Will throw an error</span></span><br><span class="line">    <span class="built_in">console</span>.log(bar); <span class="comment">// Prints nothing as bar is undefined but will not throw an error</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">let</span> foo = <span class="string">'foo'</span>;</span><br><span class="line">    <span class="keyword">var</span> bar = <span class="string">'bar'</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>At first glance, the <code>let</code> keyword does behave the same as <code>var</code> when used in a function block. But if you try to access the variable before declaration you will get an error instead of an <code>undefined</code> variable as you would with <code>var</code>.<br><br></p>
<h3 id="b)_Double_declarations_are_forbidden">b) Double declarations are forbidden</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(condition) &#123;</span><br><span class="line">    <span class="keyword">let</span> amount = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">let</span> amount = <span class="number">1</span>; <span class="comment">// will throw an Error</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><br></p>
<h3 id="c)_Be_careful_when_you_feel_like_replacing_a_var_with_let">c) Be careful when you feel like replacing a <code>var</code> with <code>let</code></h3><p>Be careful when you feel like changing <code>var</code> with <code>let</code>. Usually that happens when a function should be split into several parts.</p>
<p>If your initial function looks like</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">process</span>(<span class="params">callback</span>) </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">var</span> result = <span class="string">'foo'</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span>(dayOfTheWeek = <span class="string">'Monday'</span>) &#123;</span><br><span class="line">        callback(result);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>then suddenly looks like</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">process</span>(<span class="params">callback</span>) </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span>(dayOfTheWeek = <span class="string">'Monday'</span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> result = <span class="string">'foo'</span>;</span><br><span class="line">        callback(result);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span>(isRaining) &#123;</span><br><span class="line">        <span class="keyword">let</span> result = <span class="string">'bar'</span>;</span><br><span class="line">        callback(result);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>You should seriously consider rewriting your function as two functions:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">process1</span>(<span class="params">callback</span>) </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">var</span> result = <span class="string">'foo'</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span>(dayOfTheWeek = <span class="string">'Monday'</span>) &#123;</span><br><span class="line">        callback(result);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">process2</span>(<span class="params">callback</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> result = <span class="string">'bar'</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(isRaining) &#123;</span><br><span class="line">        callback(result);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Read more about why <a href="/2016/01/Code-Bloat-Commandos-Do-not-let-your-functions-do-more-than-one-thing/" target="_blank">functions should only do one thing<a></a></a></p>

      
    </div>
    <footer>
      
        
        
  
  <div class="tags">
    <a href="/tags/ES6/">ES6</a>, <a href="/tags/JavaScript/">JavaScript</a>
  </div>

      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>


<section id="comment">
  <h1 class="title">Comments</h1>

  
  <div id="disqus_thread">
    <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  </div>
  
</section>

</div></div>
    <div class="clearfix"></div>
  </div>
  <footer id="footer" class="inner"><div class="alignleft">
  
  &copy; 2016 Klughertz Jonathan
  
</div>
<div class="clearfix"></div></footer>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>


<script type="text/javascript">
var disqus_shortname = 'klugjo';

(function(){
  var dsq = document.createElement('script');
  dsq.type = 'text/javascript';
  dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
}());
</script>



<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>

</body>
</html>